<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">

  <title>Our superheroes</title>

  <link href="https://fonts.googleapis.com/css?family=Faster+One" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header>

  </header>

  <section>

  </section>

  <script>

    async function populate() {
      const requestUrl = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
      const request = new Request(requestUrl);

      const response = await fetch(request);
      const superHeroes = await response.json();

      populateHeader(superHeroes);
      populateHeroes(superHeroes);
    }

    function populateHeader(json) {
      const header = document.querySelector('header');
      const myH1 = document.createElement('h1');
      myH1.textContent = json.squadName;
      header.appendChild(myH1);

      const myParagraph = document.createElement('p');
      myParagraph.textContent = `Hometown: ${json.homeTown} // Formed: ${json.formed}`;
      header.appendChild(myParagraph);
    }

    function populateHeroes(json) {
      const section = document.querySelector('section');
      const heroes = json.members;

      for (const hero of heroes) {
        const myArticle = document.createElement('article');
        const myH2 = document.createElement('h2');
        const myParagraph1 = document.createElement('p');
        const myParagraph2 = document.createElement('p');
        const myParagraph3 = document.createElement('p');
        const myList = document.createElement('ul');

        myH2.textContent = hero.name;
        myParagraph1.textContent = `Secret identity: ${hero.secretIdentity}`;
        myParagraph2.textContent = `Age: ${hero.age}`;
        myParagraph3.textContent = 'Super powers: ';

        const superPowers = hero.powers;
        for (const power of superPowers) {
          const listItem = document.createElement('li');
          listItem.textContent = power;
          myList.appendChild(listItem);
        }

        myArticle.appendChild(myH2);
        myArticle.appendChild(myParagraph1);
        myArticle.appendChild(myParagraph2);
        myArticle.appendChild(myParagraph3);
        myArticle.appendChild(myList);

        section.appendChild(myArticle);
      }

    }
    populate();
  </script>
</body>

</html>